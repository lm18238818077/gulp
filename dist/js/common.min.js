!function(n){var e={init:function(){this.browser(),this.nav(),this.gotoedit()},run:function(e,t){seajs.use(e,t)},browser:function(){-[1]||(this.isIe=!0,window.XMLHttpRequest||($("html").addClass("ie6"),this.isIe6=!0)),$("body").children().eq(0).before('<table align="center" width="100%" cellpadding="0" bgcolor="#FFFFCC" style="margin:0 auto;"><tbody><tr><td style="margin:0 auto;color:#ff3b6d;font-size:14px!important;text-align:center;height:50px;background: rgba(255, 59, 109,0.1);">尊敬的用户：您好！春节期间(2月3日至2月10日)如您在访问“先之学院”过程中需咨询相关事宜，可致电王经理（13906524399）。先之学院恭祝您新春愉快，猪年大吉！</td></tr></tbody></table>')},nav:function(){$(".student-mainnav")[0]&&$(".student-mainnav li,.subnav-item").on("mouseenter",function(){$(".subnav-item").addClass("hide"),$(".nav-"+$(this).attr("key")).find("a").addClass("hover"),$(".subnav-"+$(this).attr("key")).removeClass("hide")}).on("mouseleave",function(){$(".nav-"+$(this).attr("key")).children().removeClass("hover"),$(".subnav-item").addClass("hide"),$(".subnav ul.current").removeClass("hide")})},gotoedit:function(){var e=$(".logo-wrap").first(),t=e.find(".show-wrap"),o=e.find(".edit-wrap"),r=e.find(".title-show"),n=o.find("input");e.find(".goto-edit").on("click",function(){t.addClass("hide").siblings().removeClass("hide"),n.val(r.html()).trigger("focus")}),n.on("input",function(){var e=$(this);e.val(e.val().replace(/[^a-zA-Z0-9\u4E00-\u9FA5\(\)（）]/g,""))}),n.on("blur",function(){var e=r.html(),t=$(this),n=$.trim(t.val()),i=t.attr("name");if(""==n||n==e)o.addClass("hide").siblings().removeClass("hide");else{var a={};a[i]=n,L.ajax({url:t.attr("action"),data:a,type:"post",success:function(){r.text(n),o.addClass("hide").siblings().removeClass("hide")}})}})},createUrl:function(e,t){var n=0===(e=e||"").indexOf("http")||0===e.indexOf("https")?e:window.location.protocol+"//"+window.location.host+(0===e.indexOf("/")?"":"/")+e;if(t){var i=$.extend(L.getParams(n),t),a=$.param(L.objectFilter(i));n=n.substring(n,-1===n.indexOf("?")?void 0:n.indexOf("?")),a&&(n+="?"+a)}return n},getParams:function(e){var i={},t=e.substring(e.indexOf("?")+1);return t&&$.each(t.split("&"),function(e,t){var n=t.split("=");n[1]&&(i[n[0]]=n[1])}),i},allowReplaceState:!!n.history.replaceState,replaceState:function(e,t){return!!this.allowReplaceState&&(t=t||document.title,n.history.replaceState&&n.history.replaceState({},t,e),!0)},goBack:function(e){window.location.href=document.referrer||e},ajax:function(e){var t=this,n=$.extend({},{url:"",type:"get",data:{},dataType:"json",cache:!1,success:function(){},fail:function(e){"function"==typeof this.onFail&&this.onFail(e),t.alert(e.errMsg)}},e);$.ajax({url:n.url,type:n.type,data:n.data,dataType:n.dataType,cache:n.cache,success:function(e){if(1===e.status)n.success(e.data);else{if(8001===e.errCode)return void t.alert("登录超时",function(){window.location.href=window.location.href});n.fail(e)}}})},popup:function(e){var n={beforeConfirm:function(){return!0},close:function(){if(this.undoClose)return!0;"function"==typeof e.beforeClose&&e.beforeClose()},cancelBtn:!0,lock:!0,ok:null};$.extend(n,e),n.btns&&(n.cancelBtn&&(n.btns+='<a class="btn-d btn-d-gray ml20 btn-cancel">取 消</a>'),n.content+='<div class="popup-btn">'+n.btns+"</div>",delete n.btns),n.content='<div class="lms-popup">'+n.content+"</div>",seajs.use(["artdialog","artdialog-skin"],function(){var e=artDialog(n),t=e.DOM.content;"function"==typeof n.completeCallback&&n.completeCallback(t.find(".lms-popup"),e),t.find("a.btn-sure").on("click",function(){e.disabled||(e.undoClose=!0,n.beforeConfirm(t,e)&&(e.close(),"function"==typeof n.callback&&n.callback(t,e)))}),t.find("a.btn-cancel").on("click",function(){e.close()})})},alert:function(){var e={title:"系统提示",message:"",okValue:"确&nbsp;定",beforeClose:null,width:430};"object"==typeof arguments[0]?$.extend(e,arguments[0]):(e.message=arguments[0],e.beforeClose=arguments[1]),e.buttons='<a class="btn-d btn-d-blue btn-sure">'+e.okValue+"</a>";var t={title:e.title,content:'<div class="popup-con popup-alert">'+e.message+"</div>",btns:e.buttons,width:e.width,cancelBtn:!1,beforeClose:e.beforeClose,beforeConfirm:function(e,t){return!(t.undoClose=!1)}};this.popup(t)},confirm:function(){var e={title:"系统提示",message:"",okValue:"确&nbsp;定",cancelValue:"取&nbsp;消",callback:null,cancelCallback:null,width:430};"object"==typeof arguments[0]?$.extend(e,arguments[0]):e.message=arguments[0],"function"==typeof arguments[1]&&(e.callback=arguments[1]),e.buttons||(e.buttons='<a class="btn-d btn-d-blue btn-sure">'+e.okValue+'</a><a class="btn-d btn-d-gray ml20 btn-cancel">'+e.cancelValue+"</a>"),this.popup({title:e.title,content:'<div class="popup-con popup-confirm">'+e.message+"</div>",btns:e.buttons,width:e.width,cancelBtn:!1,callback:e.callback,beforeClose:e.cancelCallback})},template:function(t){var i=this;seajs.use("art-template",function(e){e.helper("substring",function(){return i.escape(i.substring.apply(i,arguments))}),e.helper("createUrl",function(){return i.createUrl.apply(i,arguments)}),e.helper("charCode",i.charCode);var n={Y:[0,4],y:[2,2],m:[5,2],d:[8,2],H:[11,2],i:[14,2],s:[17,2]};e.helper("date",function(t,e){return"string"==typeof t&&t?(e=e||"Y-m-d").replace(/[a-zA-Z]+/g,function(e){return String.prototype.substr.apply(t,n[e])}):""}),e.helper("strtotime",function(e){return Math.round(Date.parse(e)/1e3)}),"function"==typeof t&&t(e)})},escape:function(e){return"string"==typeof e?e.replace(/&(?![\w#]+;)|[<>"']/g,function(e){return{"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"}[e]}):e},charCode:function(e){return String.fromCharCode(65+parseInt(e))},substring:function(e,t,n){if(!e)return"";var i="",a=(e=e.toString()).replace(/[^\x00-\xff]/g,"**").length;n=void 0===n?"...":n;if(a<=t+(a%2==0?2:1))return e;for(var o,r=0,s=0;r<a&&(null!=(o=e.charAt(r).toString()).match(/[^\x00-\xff]/g)?s+=2:s++,!(t<s));r++)i+=o;return t<a&&(i=$.trim(i)+n),i},selectAll:function(e){var t=e.find(".select-all");t.on("click",function(){e.find(".list-checkbox").prop("checked",this.checked),t.prop("checked",this.checked)}),e.on("click",".list-checkbox",function(){t.prop("checked",e.find(".list-checkbox:checked").length==e.find(".list-checkbox").length)})},getSeleted:function(e){var t=[];return e.filter(":checked").each(function(){t.push($(this).val())}),t},getSeletedCustom:function(e){var t=[];return e.filter(":checked").each(function(){t.push($(this).attr("custom"))}),t},serializeObject:function(e){var t=e.serializeArray(),a={};return $.each(t,function(e,t){if(void 0!==a[t.name]&&t.value){var n=t.name;n=n.replace(/^(.*)\[\]$/,function(e,t){for(var n,i=1;n=t+"["+i+"]",i++,void 0!==a[n];);return n}),a[n]=t.value}else a[t.name]=t.value||""}),a},objectDiff:function(e,t){var n={},i=!1;for(var a in e)t[a]&&t[a]!=e[a]&&(i=!0)&&(n[a]=t[a]);return i?n:null},objectDiff2:function(e,t){var n={},i=0;for(var a in e)t[a]?(e[a]!==t[a]?(n[a]=t[a],i=3):n[a]=t[a],delete t[a]):(n[a]=0,i=1);for(var a in t)n[a]=t[a],i=2;return i?n:null},arrayDiff:function(e,n){var i=[];return $.each(e,function(e,t){-1===$.inArray(t,n)&&i.push(t)}),i},isRepeatArr:function(e){var t={};for(var n in e){if(t[e[n]])return!0;t[e[n]]=!0}return!1},arraySwap:function(e,t,n){var i;return i=e[n],e[n]=e[t],e[t]=i,e},arrayFilter:function(e,n){var i=[];return n=n||function(e){return e},$.each(e,function(e,t){n(t)&&i.push(t)}),i},objectFilter:function(e,n){var i={};return n=n||function(e){return e},$.each(e,function(e,t){n(t)&&(i[e]=t)}),i},getCols:function(e,n){var i=[];return $.each(e,function(e,t){i.push(t[n])}),i},objectFlip:function(e,n){var i={};return $.each(e,function(e,t){i[t]=n||e}),i},cloneObject:function(n){var i=arguments.callee;return"object"==typeof n&&null!==n&&$.each(n=$.extend(n instanceof Array?[]:{},n),function(e,t){n[e]=i(t)}),n},getPager:function(e,t,n){t=parseInt(t)||1,n=parseInt(n)||10;var i={},a=e.length,o=a%n?Math.floor(a/n)+1:a/n,r=((t=o<=t?o:parseInt(t))-1)*n;return i.pager={total:e.length,allPages:o,cur:t,per:n},i.list=e.slice(r,r+n),i},getTreeDrop:function(e,t){var o=[],r=$.extend({keyName:"id",valueName:"name",childName:"childrens",spaceNum:1,prefix:"⊿"},t||{}),s=function(e,a){a=a||0,$.each(e,function(e,t){var n=new Array(a*r.spaceNum+1).join("　")+r.prefix;o.push([t[r.keyName],n+t[r.valueName]]);var i=t[r.childName];i&&0<i.length&&s(i,a+1)})};return s(e),o},textareaLimit:function(e,i,a){a=a||parseInt(i.text());var t=function(e){var t=$(this).val(),n=t.length;a<n?($(this).val(t.substring(0,a)),i.text(0)):i.text(a-n)};e.on(this.isIe?"propertychange":"input",t),this.isIe&&8<navigator.userAgent.match(/msie (\d)/i)[1]&&e.on("keydown",function(e){8!=e.which&&46!=e.which||t.apply(this,arguments)}),t.apply(e[0])},numberic:function(e){e.on("keypress",function(e){var t=e.which;return 48<=t&&t<=57||46==t||8==t||0==t}).on("blur",function(){var e=$.trim($(this).val()),t=$(this).attr("max"),n=$(this).attr("min")||0;if(""==e){var i=$(this).attr("defaults");if(void 0!==i)return $(this).val(i)}e=parseInt(e),e=isNaN(e)?0:e,void 0!==t&&(e=Math.min(t,e)),void 0!==n&&(e=Math.max(n,e)),$(this).val(+e)})},inputEnter:function(e,t){e.off("keydown.enter").on("keydown.enter",function(e){if(13==e.which)return t.apply(this,arguments)})},tip:{passed:function(e){var t=this.element(e,"passed");e.addClass("passed-input"),t.removeClass("hide").siblings().addClass("hide")},error:function(e,t){var n=this.element(e,"error");this.format(e),n.html("<em></em>"+t),e.addClass("error-input"),n.removeClass("hide").siblings().addClass("hide")},prompt:function(e){this.format(e);var t=this.element(e);t.children().addClass("hide"),t.find(".prompt").removeClass("hide")},format:function(e){e.removeClass("passed-input").removeClass("error-input")},hide:function(e){this.element(e).children().addClass("hide")},element:function(e,t){var n=e.parent().find(".tip");if(n[0]||(n=$('<p class="tip"></p>').appendTo(e.parent())),t){var i=n.find("."+t);return i[0]?i:$('<b class="'+t+'"><em></em></b>').appendTo(n)}return n}},swap:function(e,t){return e.splice(t,2,e[t+1],e[t])},typePicker:function(t,n){var i=t.find("input");t.find("a").on("click",function(){if(!$(this).hasClass("current")){var e=$(this).attr("data-item");if(null==e)return;t.find(".current").removeClass("current"),$(this).addClass("current"),i.val(e),n&&n(e,$(this))}}).filter("[data-item="+i.val()+"]").addClass("current")},toggleClass:function(e,t,n){return e.toggleClass(t,n),t=e.attr("class").split(" ")[0]+"-"+t,e.toggleClass(t,n),e.hasClass(t)},hover:function(e,t){this.isIe6&&e.on("mouseenter mouseleave",t,function(e){$(this).toggleClass("hover","mouseenter"==e.type)})},tabShow:function(e,t,n,i){n=n||"click",e.on(n,function(){if(!$(this).hasClass("current")){var e=$(this).index();$(this).addClass("current").siblings().removeClass("current"),t.eq(e).removeClass("hide").siblings().addClass("hide"),i&&i(e)}})},placeholder:function(e,o){!("placeholder"in document.createElement("input"))&&e.each(function(){var e,t=$(this),n=o||t.offsetParent(),i=t.attr("placeholder"),a=n.hasClass("hide");i&&((e=$.data(this,"placeholder"))||((e=$('<s class="placeholder"></s>').appendTo(n)).html(i),$.data(this,"placeholder",e)),a&&n.removeClass("hide"),e.css("left",t.offset().left-n.offset().left+parseInt(t.css("padding-left"))),e.css("top",t.offset().top-n.offset().top),a&&n.addClass("hide"),"INPUT"==this.tagName&&e.css("line-height",t.height()+"px"),e.toggleClass("hide",""!==t.val()),e.on("click",function(){t.focus()}),t.on("focus",function(){e.toggleClass("hide",!0)}).on("blur",function(){e.toggleClass("hide",""!==t.val())}))})},_cache:{},cache:function(e,t){if(void 0===t)return this._cache[e]||null;this._cache[e]=t},log:function(e){window.console&&window.console.log(e)},isSpeed:!1,getGoodnews:function(){this.goodnewPost();var e=this,t=setInterval(function(){e.goodnewPost()},6e4);$("body").on("click",".close",function(){$(".goodnewsbox").stop(!0),$(".likething").hide(),$(".close").hide(),window.clearInterval(t)})},goodnewPost:function(){if(!this.isSpeed){this.isSpeed=!0;var a=this,e=L.createUrl("/api/goodnews/list");$.post(e,{},function(e){var t=JSON.parse(e);if(0!=t.status&&1==t.status){if(0==t.data.length)return;var n=a.createHtml(t.data),i=a.setPostion(n);a.setAnimate(i)}})}},createHtml:function(e){for(var t=[],n=0;n<e.length;n++){var i='<li style="float:left;margin:0 20px; 0 20px;list-style-type:none;">';i+='<img style="display:block;float:left;height:30px;margin:5px 10px 0 0;" src="'+e[n].avatar+'" alt="">',i+='<div style="float:left;color:#fff;font-size:15px;margin-top:10px;">恭喜'+e[n].username+"通过《"+e[n].title+"》！！！</div>",i+="</li>",t.push(i)}return t},setPostion:function(e){var t=e.join(""),n=2e3*e.length,i=this.getWidth(t,n),a=$(document.body).width()-100;return $(".goodnewsbox").css(this.getGoodnewsParam(i,a)),$(".goodnewsbox").html(t),$(".close").css(this.getCloseParam(a)),$(".likething").show(),i},getWidth:function(e,t){var n=$("<span id='temp'></span>").html(e).css({position:"fixed",left:-t+"px",top:"0"});$("body").append(n);var i=n.width()+10;return $("#temp").remove(),i},getGoodnewsParam:function(e,t){return{width:e+"px",position:"absolute",top:0,left:t+"px"}},getCloseParam:function(e){return{position:"absolute",left:e/2+500+"px",top:0,width:"30px",height:"30px","text-align":"center","line-height":"30px","background-color":"#ff9000",display:"block",color:"#eee","font-size":"15px",cursor:"pointer"}},setAnimate:function(e){var t=this;$(".goodnewsbox").animate({left:-e+"px"},30*e,function(){$(".close").hide(),$(".likething").hide(),t.isSpeed=!1})}};e.init(),n.L=e}(window);